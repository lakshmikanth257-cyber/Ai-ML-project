name-template: 'v$RESOLVED_VERSION'
tag-template: 'v$RESOLVED_VERSION'

categories:
- title: 'Major Changes'
  labels:
  - 'breaking-change'
  - 'breaking'
  - 'feat'
  - 'fix'
  - 'major'
- title: 'Other Changes'
  labels:
  - 'asya-crew'
  - 'asya-gateway'
  - 'asya-operator'
  - 'asya-runtime'
  - 'asya-sidecar'
  - 'build'
  - 'chore'
  - 'ci'
  - 'deps'
  - 'docs'
  - 'minor'
  - 'patch'
  - 'perf'
  - 'refactor'
  - 'style'
  - 'test'

# This is an allow-list of labels. PRs without one of these labels are excluded from the changelog.
# IMPORTANT: This list must be kept in sync with the labels in `categories` above.
# If you add a label to a category, you MUST add it here too, otherwise it will be silently ignored.
include-labels:
# major changes:
- 'breaking-change'
- 'breaking'
- 'feat'
- 'fix'
- 'major'
# other changes:
- 'asya-crew'
- 'asya-gateway'
- 'asya-operator'
- 'asya-runtime'
- 'asya-sidecar'
- 'build'
- 'chore'
- 'ci'
- 'deps'
- 'docs'
- 'minor'
- 'patch'
- 'perf'
- 'refactor'
- 'style'
- 'test'


category-template: "## $TITLE"
change-title-escapes: '\<*_&'

version-resolver:
  major:
    labels:
    - 'major'
    - 'breaking'
    - 'breaking-change'
  minor:
    labels:
    - 'minor'
    - 'feat'
  patch:
    labels:
    - 'patch'
    - 'fix'
    - 'docs'
    - 'chore'
    - 'ci'
    - 'build'
    - 'deps'
    - 'test'
    - 'perf'
    - 'refactor'
    - 'style'
  default: patch

autolabeler:
- label: 'feat'
  title:
  - '/^feat(\(.*\))?:/i'
- label: 'fix'
  title:
  - '/^fix(\(.*\))?:/i'
- label: 'docs'
  title:
  - '/^docs(\(.*\))?:/i'
  files:
  - '**/*.md'
  - 'docs/**/*'
- label: 'style'
  title:
  - '/^style(\(.*\))?:/i'
- label: 'refactor'
  title:
  - '/^refactor(\(.*\))?:/i'
- label: 'perf'
  title:
  - '/^perf(\(.*\))?:/i'
- label: 'test'
  title:
  - '/^test(\(.*\))?:/i'
  files:
  - 'testing/**/*'
  - '**/*_test.go'
  - '**/test_*.py'
- label: 'build'
  title:
  - '/^build(\(.*\))?:/i'
- label: 'ci'
  title:
  - '/^ci(\(.*\))?:/i'
  files:
  - '.github/**/*'
- label: 'chore'
  title:
  - '/^chore(\(.*\))?:/i'
- label: 'breaking'
  title:
  - '/^[a-z]+(\(.*\))?!:/i'
  - '/BREAKING CHANGE/i'
- label: 'deps'
  files:
  - 'go.mod'
  - 'go.sum'
  - '**/requirements*.txt'
  - '**/pyproject.toml'
- label: 'asya-operator'
  files:
  - 'src/asya-operator/**/*'
- label: 'asya-gateway'
  files:
  - 'src/asya-gateway/**/*'
- label: 'asya-sidecar'
  files:
  - 'src/asya-sidecar/**/*'
- label: 'asya-runtime'
  files:
  - 'src/asya-runtime/**/*'
- label: 'asya-crew'
  files:
  - 'src/asya-crew/**/*'

template: |
  $CHANGES

  ## Docker Images

  All images are published to GitHub Container Registry:

  - `ghcr.io/$OWNER/asya-operator:$RESOLVED_VERSION`
  - `ghcr.io/$OWNER/asya-gateway:$RESOLVED_VERSION`
  - `ghcr.io/$OWNER/asya-sidecar:$RESOLVED_VERSION`
  - `ghcr.io/$OWNER/asya-crew:$RESOLVED_VERSION`
  - `ghcr.io/$OWNER/asya-testing:$RESOLVED_VERSION`

  ## Contributors

  $CONTRIBUTORS
